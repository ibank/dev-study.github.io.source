language: ruby
rvm: 
  - 1.9.3
  - 2.0.0
env:
  global:
    - GIT_COMMITTER_NAME=nacyot
    - GIT_COMMITTER_EMAIL=propellerheaven@gmail.com
    - GIT_AUTHOR_NAME=nacyot
    - GIT_AUTHOR_EMAIL=propellerheaven@gmail.com
    - secure: "POnDEeNTXMeN6CFUuu2Hwo6yP5eZ3LQ0AhV/NmdaGY+wFKSKF3f6KE+3gLextKlGLVb+is7+fgU3jyJeyGrMUXsly08c+5nAiW4Eo6FwmtKkGezwQR1eqkDmIYXVrU03xcdLz1p8sQhZfhYSlVNopNocwtMytfDYDlcH1SdVcNk="
before_script:
  # - echo -e "Host github.com\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
  - git clone --quiet https://github.com/dev-study/dev-study.github.io.source.git build
  - pushd build
  - git checkout -b gh-pages
  - popd
script: bundle exec middleman build
after_success:
  - cd build
  - git add -A
  - git commit -m 'Update build files'
  - '[ "$TRAVIS_BRANCH" == "master" ] && [ $GH_TOKEN ] && git push --quiet https://$GH_TOKEN@github.com/dev-study/dev-study.github.io.git gh-pages 2> /dev/null'
