이 글에서는 정보시각화에 있어서 정보와 시각적 요소의 맵핑이라는 주제로
이야기를 하고자 합니다. 이 이야기는 약간 추상적이며 어떤 라이브러리의
모델에 정확하게 일치하는 이야기도 아닙니다. 더욱이 실질적으로 이 글에서는 막대 그래프 한 가지만을
이야기할 것입니다만, 결국에 정보시각화에서 다루는 복잡한 그래프도
여기에서 다루는 맵핑이라는 주제에서 크게 벗어나있지 않습니다. 이러한
점을 이해하고 그래프를 본다면 그래프를 바라보는 시각이 좀 더 나아지지
않을까 하는 생각을 해봅니다.

먼저 이러한 단순한 데이터가 있다고 가정하겠습니다.

<표>

이 데이터는 각각 수학, 국어, 영어, 과학 성적을 나타내는 매우 작은
데이터입니다. 이 데이터를 가지고 R 언어의 내장함수인 barplot을 이용해
간단한 막대그래프를 그려보겠습니다.

<그래프>

그래프를 생성하면 위와 같은 그래프가 만들어지는 것을 볼 수 있습니다.
color에 rainbow인자를 넘겨줬더니 매우 알록달록합니다. 그런데 이러한 그래프가 만들어지는 과정에서 실제로 어떤 일들이 벌어졌을까요?
데이터가 그래프로 조형되는 과정은 실제로 그렇게 단순하지 않습니다.
아마 프로그래밍을 통해서 막대그래프를 그리는 추상화된 함수를 만들어본
적이 있는 분이라면 이 말에 동감하실 수 있을 겁니다. 그림이 그려지는
캔버스가 있어야하고, 그 위에 들어가게 될 막대, 축, 다양한 라벨 등등
다양한 그래프의 요소들을 다뤄야하고 이러한 요소들을 다시 캔버스의
크기와 각 요소들이 겹쳐지지 않도록 만들어야합니다. 단순히 막대그래프
하나를 그리는 데도 우리는 생각보다 많은 것들을 다뤄야만 합니다.

이 글에서 그러한 과정 전체를 다루지는 않습니다. 여기서는 그 과정 중에서도
특히 이미 정제된 데이터(즉 화면에 표현될 데이터)를 그래프 상의 시각적
요소에 어떻게 맵핑 시키는지, 그리고 그렇게 맵핑될 수 있는 시각적
요소들은 무엇이 있는 지를 다뤄볼 것입니다.

여기서는 우리가 가진 정말 단순히 2변수 데이터와 막대 그래프 사이에
있는 시각적 요소들의 맵핑을 다룰 것입니다. 이를 위해서는 우리가 가진
데이터가 어떤 속성을 띄고 있는지와 막대 그래프에 어떠한 시각적
요소들이 있는 지를 살펴볼 필요가 있습니다.

<데이터 다시>

먼저 데이터를 살펴보면 우리는 2가지 변수를 가지고 있습니다. 첫번째는 점수(Score)
변수입니다. 이는 숫자로된 비율 데이터입니다. 두번째는 과목명(Class)입니다.
이는 임의로 부여될 수 있는 이름으로 문자열로 된 명목 데이터입니다.
이러한 변수의 특징이 중요한 이유는 변수의 특성에 따라서 맵핑이 가능한
시각적 요소가 있고, 그렇지 않은 시각적 요소가 있기 때문입니다.

다음으로 막대 그래프에 있는 시각적 요소를 살펴보겠습니다. 가장 단순히
우리가 막대 그래프에서 생각할 수 있는 요소는 막대의 높이라고 할 수
있습니다. 이러한 막대의 높이는 일반적으로 숫자로 된 데이터에
맵핑됩니다. 즉 주어진 데이터의 숫자가 높으면 막대 역시 높아지고,
주어진 데이터의 숫자가 낮으면 막대 역시 낮아집니다.

그 다음으로 생각할
수 있는 요소는 막대 자체입니다. 이 부분은 지나치기 쉽지만 이러한 부분을
생각해보는 것도 매우 중요합니다. 막대 그래프를 그릴 때 우리는 무엇을
근거로 '여러개'의 막대를 생성하고 이름을 붙여줄까요? 이것을 설명할 수
있는 몇 가지 방법이 있습니다. 한 가지 방법은 주어진 데이터의 개수를
가지고 막대의 개수를 판단하는 방법입니다. 우리가 가진 데이터에서는 총
4개의 데이터가 주어집니다. 따라서 위에서 그려진 그래프에 대해 데이터의
개수를 근거로 막대를 생성했다고 말할 수도 있습니다. R의 barplot 함수는
이러한 사고방식이 좀 더 많이 반영되어있습니다. 아래 코드는 이를 좀 더
명확히 보여줍니다.

하지만 이렇게 될
경우 실질적으로 우리는 Class라는 변수는 필요하지 않게 됩니다. 여기서
조금 생각을 바꿔서 막대 자체가 Class라는 변수에 맵핑되어있다고 생각할
수도 있습니다. 막대라는 시각적 요소의 역할은 주어진 데이터들에 대한
각각의 막대를 생성해주고, 이러한 막대에 이름을 붙여주는 역할을 합니다.
따라서 막대라는 시각적 요소에 대응하기 좋은 데이터란 막대를 데이터를
설명해줄 수 있는 문자열이라고 할 수 있습니다. 조금 추상적이긴 하지만
이 변수를 데이터에 부수적으로 이름을 붙여주는 변수가 아니라, 막대를
나누는 기준이 되는 시각적 요소라고 받아들여주시기 바랍니다.

우리가 가진 데이터와 막대 그래프의 가장 중요한 시각적 요소 두가지를
설명하면서 이미 많은 부분의 설명해버렸습니다. 여기서 짚고 넘어가야하는
부분은 데이터의 각 변수와 그래프의 각 시각적 요소는 자동적으로
맵핑되는 게 아니라는 점입니다. 예를 들어 엑셀이나 유사한 스프레드시트
프로그램들에서는 데이터가 담긴 표의 형태에 따라서 변수들을 어떤 요소에
맵핑 시킬지 자동적으로 결정합니다. 하지만 이는 내부적으로 요소들의
특징을 분석해 더 잘 들어맞는 변수에 맵핑시켜주는 것뿐이지, 명시적인
맵핑 과정 자체가 완전히 사라진 것은 켤코 아닙니다.

위에서 만든 그래프에서 어떤 변수가 어떤 시각적 요소에 명시적으로
맵핑되어있는지를 살펴보면 다음과 같습니다.

<>

하지만 뭔가 허전하지 않으신가요? 우리가 생성한 그래프는 매우
'알록달록'했습니다. 이게 무슨 얘기인지 감이 오시나요? 이는 우리가
다루지 않은 또다른 데이터와 시각적 요소의 맵핑이 그래프를 생성할 때
이루어졌다는 걸 의미합니다. 저는 이러한 미묘한 차이를 잡아낼 수 있는
능력이 Graph literacy라고 생각하고 있습니다. 데이터를 시각적 요소에
맵핑하는 정확한 인식이 없다면 이러한 요소들은 너무나도 놓치기
쉽습니다.

우리가 생성한 그래프에서 색상이라는 요소는 가장 눈에 띄지만, 막대
그래프에서는 사실 없어도 되는 요소입니다. 시각화라는 주제에 관심이
있다면 Edward Tufte라는 이름을 들어보셨을 것입니다. 이 분은 data-ink
ratio라는 명제를 주장하면서 그래프에서 데이터를 나타내는 잉크의 비율을
극대화하는 그래프가 좋은 그래프라는 주장을 하셨습니다. 그러면서
제시했던 막대 그래프의 모양이 다음과 같습니다.

<>

아주 극단적인 이 그래프는 우리가 가지고 있는 막대 그래프에서 가장
본질적인 부분이 무엇인지를 잘 보여줍니다. 그것은 우리가 앞에서 다룬 두
가지, 막대를 몇 개로 나눌 것인지와 막대의 높이입니다. 이 그래프의
높이는 선이기 때문에 길이만 있고 면적이 없습니다. 따라서 면적을 채울
색상이 들어갈 자리가 없습니다.

<충공깽>

이러한 그래프는 그야말로 충격과 공포 그 자체입니다. 사실 이렇게
극단적인 그래프가 사용되는 경우는 정말 흔치 않습니다. 하지만 이렇게
놓고 보면 사실 많은 그래프에서 색상에는 어떠한 데이터도 맵핑되어있지
않은 것을 알 수 있습니다. 실제로 여러 그래프 라이브러리들에서는 색상을
맵핑하지 않더라도 자동적으로 알록달록한 색상을 집어넣어줍니다. 그리고
보는 사람도 만드는 사람도 이 점을 주의깊게 보지 않습니다. 색상을
자동적으로 맵핑시켜준다는 말을 좀 더 정확히 말하면 막대를 나눠주는
변수를 기준으로 서로 다른 Color값으로 맵핑시키고 이렇게 생성된
Color값으로 막대 내부를 채운다는 이야기입니다. 이러한 과정은 일종의 
Scale이라고 할 수 있습니다. 이에 대해서는 조금 아래에서 좀 더 이야기하겠습니다.

그렇다면 이러한 문제를 해결하기 위해서는 위에서 제시한 극단적인
그래프를 사용해야할까요? 그것도 하나의 방법이겠지만, 반드시 그런 것은
아닙니다. 이 문제를 해결하기 위한 괜찮은 두 가지 정도의 방법이
있습니다.

여러가지 그래프를 생성할 수 있는 툴들에서는 이러한 개념을 좀 더 온화하게 받아들이고
있습니다. 이 방법은 정말 간단합니다. 색상이라는 개념을 사용하지 않고
단색 처리하면 됩니다. 실제로 엑셀이나 유사한 스프레드시트
프로그램들에서는 이와 같은 방법으로 막대들을 단색으로 채워줍니다.
그래서 저는 이러한 프로그램을 사용하고도 굳이 안에다가 색을 채워오는
사람들을 보면 정신이 혼미해지곤 합니다. 그러지 마시기 바랍니다.
화려함이 그래프에서 반드시 부정되어야하는 요소는 아니지만, 시각적인
요소에 호소하는 시각화에 있어 절제란 언제라도 훌륭한 미덕이라는 사실을
잊어서는 안됩니다.

<엑셀에서 생성한 그래프>

실제 위의 코드에서 색상을 제거하면 아래와 같은 코드가 됩니다.

<코드>

이 코드는 다음과 같은 그래프를 생성합니다.

<그래프>

두번째 방법은 이 요소를 통해서 또 다른 유의미한 데이터를 전달하는
것입니다. 위에서 이야기했듯이 막대의 색상은 막대 그래프에 있어서 가장
본질적인 요소는 아닙니다. 이 방법은 필수적이지 않습니다. 색상이 아무런
데이터를 나타내지 않더라도, 즉 단색으로 구성되어있더라도 그 그래프는
훌륭히 완성된 막대 그래프입니다. 하지만 그냥 버리기에 색상은 다른
데이터를 맵핑하기에는 꽤 괜찮은 시각적 요소입니다.

## Scale

하지만 여기에는 작은 문제가 따라옵니다. 우리는 앞서서 어떤 시각적
요소가 어떤 데이터와 연결될 수 있는 지를 보았습니다. 예를 들어 막대의
분류는 문자열 데이터에 맵핑될 수 있고, 막대의 높이는 수치 데이터에
맵핑될 수 있습니다. 엄밀히 말하면 우리는 각각의 데이터들이 어떻게
맵핑이 되는지에 관해서는 다루지 않았습니다. 이러한 과정에서 특히
주목할만한 부분은 시각적 요소가 요구하는 데이터 타입으로 우리가 가진
데이터를 중간에 변환시킬 수 있다는 점입니다.

예를 들어 보죠. 우리는 앞서 막대의 높이라는 시각적 요소에는 수치
데이터가 맵핑된다고 이야기한 바 있습니다. 하지만 진실은 조금 다릅니다.
실제로 수치 데이터는 막대의 높이 그 자체를 나타내지 않습니다. 막대의
높이는 우리가 넘겨준 데이터를 우리가 그래프를 그리는 캔버스 위에서
그래프가 그려지는 공간의 최대 높이와 최소 높이를 계산하고 그 안에서
좌표로 계산됩니다. 이러한 방법은 대개 비슷하지만 엄밀한 통일된
방법이 존재하는 것은 아닙니다.

여기서 중요한 점은 우리가 만약 이러한 과정 중간에 개입을 할 수 있다면,
어떠한 데이터를 넘겨받더라도 좌표로 환산해줄 수 있다는 점입니다. 예를
들어 문자열 데이터를 넘겨준다고 해보죠. 문자열 데이터에는 문자 자체를
표현하는 숫자나, 아니면 글자 수와 같은 수치 정보가 포함되어 있습니다.
이러한 정보를 막대의 높이를 나태낼 수 있는 수치로 변환시켜 줄 수
있습니다. 이러한 과정을 스케일링이라고 합니다.

다시 원래 이야기로 돌아가보죠. 막대의 내부 색상이라는 시각적 요소에
맵핑될 수 있는 데이터는 RGB건 CYMK건 혹은 16진수건 색상 정보입니다.
물론 우리 데이터에 직접적으로 색상을 나타내는 변수가 있을 수도
있습니다. 하지만 상식적으로 생각해도 그런 경우는 드뭅니다. 대부분의
변수는 수치 데이터나 문자열 데이터나 등급 데이터로 구성됩니다.
그렇다면 우리는 이 데이터들을 컬러로 변환 시켜줄 수 있는 스케일 함수가
필요합니다.

<예제>

예를 들어서 수치 데이터들의 경우에는 min값과 max값을 잡아서 색의
명도를 다르게 줄 수 있습니다. 문자열 데이터의 경우에는 서로 같은
문자열이면 같은 색상을 주고 서로 다른 문자열이면 다른 색상을 주는
함수를 생각해볼 수 있습니다.

이러한 스케일 함수를 통해서 수치 데이터나 문자열 데이터도 색상
데이터로 변환 할 수가 있게되었습니다. 이제 이렇게 변환된 데이터를 실제
그래프의 시각적 요소, 즉 막대의 색상에 맵핑할 수 있게 되었습니다.
데이터를 시각적 요소에 맵핑하는 과정에서 스케일 과정은 필수적인
과정이라고 할 수 있습니다. 이러한 과정은 대부분의 경우에는 눈에 보이지
않기 때문에 놓치는 경우가 많지만 중간이 이러한 변환이 일어난다는 것을
알고 있는 것은 매우 중요합니다.

#

이제 이러한 스케일 함수를 사용해서 실제로 추가저인 데이터를 막대
그래프 위에 얹어보겠습니다. 우리가 가진 데이터는 아직 2개의 변수밖에
없기 때문에 여기서는 문자열로 구성된 과목의 범주 데이터를 추가해보겠습니다.

<표>

여기에는 언어와 과학이라는 두 개의 큰 범주가 있습니다. 
